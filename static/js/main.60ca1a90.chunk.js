(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{19:function(e,t,a){},21:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),o=a.n(r),c=a(3),s=a.n(c),i=(a(19),a(11)),l=a(4),u=a(5),h=a(7),d=a(6),m=a(8),p=(a(20),a(21),function(e){var t=e.fetchImages;return Object(n.jsx)("button",{type:"button",onClick:t,className:"Button",children:"Load more..."})}),g=a(10),j=a.n(g),b=a(12),f="19045018-7ef62a7ed2607017cbe478eaf",y="https://pixabay.com/api/";function O(){return(O=Object(b.a)(j.a.mark((function e(t,a){var n,r,o,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams({key:f,q:t,page:a,per_page:12,image_type:"photo",orientation:"horizontal"}),r="".concat(y,"?").concat(n),e.next=4,fetch(r);case 4:return o=e.sent,e.next=7,o.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v={fetchImages:function(e,t){return O.apply(this,arguments)}},x=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.handleQueryChange=function(t){e.setState({query:t.currentTarget.value.toLowerCase()})},e.handleQuerySubmit=function(t){t.preventDefault(),""!==e.state.query.trim()?(e.props.onSubmit(e.state.query),e.setState({query:""})):m.b.error("\u0421\u0430\u043c\u0443\u0440\u0430\u0439! \u041d\u0430\u043f\u0438\u0448\u0438 \u0437\u0430\u043f\u0440\u043e\u0441!")},e}return Object(u.a)(a,[{key:"render",value:function(){return Object(n.jsx)("header",{className:"Searchbar",children:Object(n.jsxs)("form",{className:"SearchForm",onSubmit:this.handleQuerySubmit,children:[Object(n.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(n.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(n.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.query,onChange:this.handleQueryChange})]})})}}]),a}(r.Component),S=function(e){var t=e.image,a=e.openModal,r=t.webformatURL,o=t.tags;return Object(n.jsx)("li",{id:t.id,onClick:a,className:"ImageGalleryItem",children:Object(n.jsx)("img",{src:r,alt:o,className:"ImageGalleryItem-image"})})};var w=function(e){var t=e.images,a=e.openModal;return Object(n.jsx)("div",{children:Object(n.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return Object(n.jsx)(S,{openModal:a,image:e},e.id)}))})})},I=document.querySelector("#modal-root"),C=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleOnClose=function(t){"Escape"===t.code&&e.props.onClose()},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleOnClose)}},{key:"componentWillUnmount",value:function(){window.addEventListener("keydown",this.handleOnClose)}},{key:"render",value:function(){return Object(c.createPortal)(Object(n.jsx)("div",{onClick:this.props.onClose,className:"Overlay",children:Object(n.jsx)("div",{children:this.props.children})}),I)}}]),a}(r.Component),k=a(13),M=a.n(k),q=(a(44),function(){return Object(n.jsx)(M.a,{type:"Circles",color:"#00BFFF",height:100,width:100,timeout:3e3})}),F=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={images:[],page:1,query:null,modalImage:[],modalImageID:null,openModal:!1,isLoading:!1},e.onSearch=function(t){e.setState({query:t,images:[],page:1})},e.loadMore=function(){e.setState((function(e){return{page:e.page+1}}))},e.onOpenModal=function(t){e.setState({openModal:!0,modalImageID:Number(t.currentTarget.id)})},e.closeModal=function(){e.setState({openModal:!1})},e.imageFind=function(){return e.state.images.find((function(t){return t.id===e.state.modalImageID}))},e}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.query===this.state.query&&t.page===this.state.page||this.fetchImg()}},{key:"fetchImg",value:function(){var e=this,t=this.state,a=t.query,n=t.page,r=t.images;this.setState({isLoading:!0}),v.fetchImages(a,n).then((function(t){return e.setState({images:[].concat(Object(i.a)(r),Object(i.a)(t.hits)),page:n})})).catch((function(e){throw new Error(e)})).finally(this.setState({isLoading:!1}),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}))}},{key:"render",value:function(){return console.log(this.state.images),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(x,{onSubmit:this.onSearch}),Object(n.jsx)(w,{openModal:this.onOpenModal,images:this.state.images}),this.state.isLoading&&Object(n.jsx)(q,{}),Object(n.jsx)(p,{fetchImages:this.loadMore}),",",Object(n.jsx)(m.a,{autoclose:3e3}),this.state.openModal&&Object(n.jsx)(C,{id:this.state.modalImageID,onClose:this.closeModal,children:Object(n.jsx)("img",{src:this.imageFind().largeImageURL,alt:this.imageFind().tags})})]})}}]),a}(r.Component);s.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(F,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.60ca1a90.chunk.js.map